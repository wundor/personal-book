<nz-modal
  [(nzVisible)]="isVisible"
  nzTitle="Create transaction"
  (nzOnCancel)="handleCancel()"
>
  <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
    <div *nzModalContent>
      <div nz-row>
        <div nz-col>
          <nz-form-item>
            <nz-form-control nzErrorTip="Should not be empty">
              <nz-date-picker
                [(ngModel)]="date"
                formControlName="date"
              ></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col>
          <nz-form-item>
            <input
              formControlName="info"
              nz-input
              nzSize="large"
              placeholder="Notation"
            />
          </nz-form-item>
        </div>
      </div>

      <div nz-row *ngFor="let line of listOfLines; let i = index">
        <div nz-col>
          <nz-form-item>
            <nz-form-control
              nzErrorTip="Please input account name or delete this field."
            >
              <nz-autocomplete
                [nzDataSource]="filteredOptions"
                #auto
              ></nz-autocomplete>
              <input
                formControlName="fullName"
                class="account-input"
                nz-input
                placeholder="account"
                [attr.id]="line.id"
                [formControlName]="line.data.account"
                [(ngModel)]="inputValue"
                [nzAutocomplete]="auto"
                (ngModelChange)="onChange($event)"
              />
              <i
                nz-icon
                nzType="setting"
                nzTheme="outline"
                class="dynamic-delete-button"
                (click)="removeField(line, $event)"
              ></i>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <nz-form-item>
        <nz-form-control
          [nzXs]="{ span: 24, offset: 0 }"
          [nzSm]="{ span: 20, offset: 4 }"
        >
          <button
            nz-button
            nzType="dashed"
            class="add-button"
            (click)="addField($event)"
          >
            <i nz-icon nzType="plus"></i>
            Add line
          </button>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-control nzErrorTip="Should not be empty">
          <nz-input-group> </nz-input-group>
        </nz-form-control>
      </nz-form-item>
    </div>
    <nz-form-item>
      <div *nzModalFooter>
        <nz-form-control>
          <button nz-button nzType="default" (click)="handleCancel()">
            Cancel
          </button>
          <button
            nz-button
            nzType="primary"
            [disabled]="!validateForm.valid"
            [nzLoading]="isOkLoading"
            (click)="submitForm()"
          >
            Add
          </button>
        </nz-form-control>
      </div>
    </nz-form-item>
  </form>
</nz-modal>
